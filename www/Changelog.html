<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
<TITLE>GraphicsMagick 1.3 ChangeLog</TITLE>
	<STYLE>
	<!--
		@page { size: 8.5in 11in }
		TD P { color: #000000; font-family: "Verdana", "Arial", "Helvetica", sans-serif; font-size: 12pt }
		P { color: #000000; font-family: "Verdana", "Arial", "Helvetica", sans-serif; font-size: 12pt }
		A:link { color: #0085c0 }
		A:visited { color: #800080 }
	-->
	</STYLE>
</HEAD>
<body LANG="en-US" TEXT="#000000" LINK="#0085c0" VLINK="#800080" BGCOLOR="#ffffff">
<table BORDER=0 WIDTH="100%" >
<tr>
<td BGCOLOR="#52799E"><img SRC="../images/right_triangle.png" ALT=">" height=14 width=15>
<b><font face="Helvetica, Arial"><font color="#FFFFFF"><font size="+1">GraphicsMagick 1.3 ChangeLog</font></font></font></b></td>
</tr>
</table>
<p>
2008-06-21  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> wand/magick_wand.c (MagickSetImageFormat): Add method to support
        setting the image format.

</UL>
<p>
2008-06-20  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/profile.c (ProfileImage): Convert to use pixel iterators.

</UL>
<p>
2008-06-19  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/channel.c (ImportImageChannel): Convert to use pixel
        iterators.<BR>
        (SetImageChannelDepth): Convert to use pixel
        iterators.<BR>
  <LI> Magick++/lib/Image.cpp (quantize): Error measurement support was
        being performed incorrectly.  SyncImage() is not needed here.

</UL>
<p>
2008-06-18  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/channel.c (GetImageChannelDepth): Convert to use pixel
        iterators.

</UL>
<p>
2008-06-17  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/mat.c (RegisterMATImage): Set blob support to false for
        MAT coder until bug related to blobs is fixed.

</UL>
<p>
2008-06-16  Fojtik Jaroslav  &lt;JaFojtik@seznam.cz&gt;

<UL>
  <LI> mat.c Ability to read a new compressed MATLAB image format.

</UL>
<p>
2008-06-15  Fojtik Jaroslav  &lt;JaFojtik@seznam.cz&gt;

<UL>
  <LI> mat.c, wpg.c: For empty images a message ImageFileDoesNotContainAnyImageData
        is returned.

</UL>
<p>
2008-06-14  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/channel.c (ChannelImage): Convert to use pixel iterators.
        (ExportImageChannel): Convert to use pixel iterators.
  <LI> coders/dpx.c (WriteDPXImage): As an experimental feature, when
        the environment variable MAGICK_RESERVE_STORAGE is set to "TRUE",
        then the DPX format writer will request the required storage from
        the filesystem in advance (if supported by the OS) or the full
        amount of memory required (when writing to an in-memory BLOB).

</UL>
<p>
2008-06-12  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/magic.c (InitializeMagicInfo): New function to initialize
        file format detection.<BR>
        (GetMagickFileFormat): New internal implementation function to
        detect file format based on file header.
        (GetMagicInfo): This internal implementation function is eliminated.
        (MagicInfo): MagickInfo structure is now private to the
        implementation.

</UL>
<p>
2008-06-11  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/magick.c (ListMagickInfo): Replace "blob support"
        indication with the coder stability classification.
        (RegisterMagickInfo): Pay attention to coder classification.
  <LI> magick/magick.h (MagickInfo): Added a coder stability
        classification field as well as the MAGICK_CODER_STABILITY
        environment variable to choose which coders are enabled.

</UL>
<p>
2008-06-10  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/image.c (GetImageCharacteristics): Don't access image
        pixels if they are not defined yet.
  <LI> coders/{avi.c,avs.c,dcm.c,ept.c,fits.c,mtv.c,palm.c,rla.c,tga.c}:
        Readers are now much more robust when faced with reading random files.

</UL>
<p>
2008-06-08  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/image.c (SetImageInfo): Exclude all virtual delegates and
        coders for pseudo-formats.

</UL>
<p>
2008-06-07  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/dcm.c (ReadDCMImage): Make DCM reader quit immediately on
        EOF condition.<BR>
  <LI> coders/avi.c (ReadAVIImage): Make AVI reader more robust at
        rejecting bad files.<BR>
  <LI> configure.ac: Eliminated --enable-delegate-build option that I
        have not used or tested for almost ten years so it probably did
        not work anyway.  Use --with-ttf=/prefix to specify the the
        installation prefix for freetype.  Use
        --with-ttf=/prefix/bin/freetype-config to specify the whole path
        to freetype-config.

</UL>
<p>
2008-06-04  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/command.c (MogrifyImage): Add support for
        -black-threshold and -white-threshold.
  <LI> magick/image.h (enum ChannelType): Added GrayChannel
        enumeration.<BR>
  <LI> magick/operator.c (QuantumOperatorImageMultivalue): New
        implementation function to make creating legacy functions like
        black/white thresholding easier.
  <LI> wand/magick_wand.c (MagickBlackThresholdImage): Implemented.
        (MagickWhiteThresholdImage): Implemented.
  <LI> magick/effect.c (BlackThresholdImage): Implemented a
        BlackThresholdImage() which is similar to (but not identical to)
        the one in ImageMagick.<BR>
        (WhiteThresholdImage): Implemented a WhiteThresholdImage() which
        is similar to (but not identical to) the one in ImageMagick.

</UL>
<p>
2008-06-03  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/operator.c: Added support for additional channel
        operators (-operator) for applying noise to one or more channels.
        The additional operators are Noise-Gaussian, Noise-Impulse,
        Noise-Laplacian, Noise-Multiplicative, Noise-Poisson, and
        Noise-Uniform.  The amount of noise applied is controlled via the
        numeric argument, which can specify the percentage of noise to
        apply.<BR>
  <LI> magick/enum_strings.c: New source module to contain the various
        EnumToString() and StringToEnum() functions which seem to multiply
        like bunny-rabbits.<BR>
  <LI> magick/gem.c (GenerateNoise): Poisson noise generation was
        taking excessively long and producing wrong results.  Noise
        generation was only producing the correct amount of noise in the
        Q8 build.<BR>
        (GenerateDifferentialNoise): New function to return noise in a
        floating-point differential format.

</UL>
<p>
2008-06-02  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/pixel_iterator.h: Removed x,y coordinate information from
        all of the callback definitions since a use for this information
        has yet to be found.<BR>
  <LI> magick/composite.c (CompositeImage): Use individual callback
        functions for the composition operations.
  <LI> coders/xcf.c (ReadXCFImage): Deal with grayscale images the
        GraphicsMagick-way.

</UL>
<p>
2008-06-01  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/xcf.c (ReadXCFImage): Validate XCF file data so that
        corrupted files don't crash GraphicsMagick.

</UL>
<p>
2008-05-30  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/dpx.c (ReadDPXImage): Incrementally read user data
        part and check for EOF so that bogus files are rejected quickly.
  <LI> coders/cineon.c (ReadCINEONImage): Incrementally read user data
        part and check for EOF so that bogus files are rejected quickly.

</UL>
<p>
2008-05-29  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/pict.c (ReadPICTImage): Ensure that row_bytes calculation
        does not overflow.  Verify that RLE decode does not overflow
        buffer.  Validate image frame dimensions.
  <LI> coders/palm.c (ReadPALMImage): Validate PALM bits per pixel and
        colormap indexes.<BR>
  <LI> magick/resource.c (ListMagickResourceInfo): List controlling
        environment variable in '-list resource' output as a configuration
        usage reminder.<BR>
  <LI> coders/pdf.c (ReadPDFImage): Properly deal with reading rotated
        PDFs.

</UL>
<p>
2008-05-28  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> FAQ.txt: Added a FAQ for how to extract and combine CMYK image
        channels to individual files.

</UL>
<p>
2008-05-27  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/fx.c (ConvolveImage): Eliminate unnecessary "range check"
        feature since range checking is not where the CPU time is going.
  <LI> magick/effect.c (UnsharpMaskImage): Re-write implementation to
        use pixel iterators.<BR>
  <LI> magick/pixel_iterator.c: Decided that the old per-pixel
        iterations were not useful enough to keep since the region-based
        ones are working fine.  Moved pixel_row_iterator.c to
        pixel_iterator.c and renamed functions to remove the 'Row'
        designation.<BR>
  <LI> magick/composite.c (CompositeImage): Automatically adjust
        colorspace of composite image so that it is compatible with canvas
        image.<BR>
  <LI> magick/alpha_composite.h (AlphaComposite): Fix alpha composite
        when both pixels contain transparency.
  <LI> PerlMagick/demo/demo.pl: Use segmentation parameters which
        are more suitable for our image.

</UL>
<p>
2008-05-23  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/composite.c (CompositeImage): CMYK copy composition
        operators automatically set the image colorspace to CMYK.
  <LI> coders/tiff.c (WriteTIFFImage): CMYK must take precedence over
        JPEG compression.  We don't support JPEG compression in TIFF with
<STRONG>CMYK.</STRONG>

</UL>
<p>
2008-05-22  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/effect.c (ChannelThresholdImage): Re-implement using
        pixel iterators.  Support thresholding only the red channel by
        eliminating the switch to intensity thresholding if only one
        channel parameter is supplied.<BR>
  <LI> coders/tiff.c (WriteTIFFImage): Don't accidentially convert CMYK
        images to RGB.<BR>
  <LI> magick/composite.c (CompositePixels): Handle CopyBlack properly
        for CMYK images.<BR>
  <LI> magick/command.c (CompositeImageCommand):  Support CopyCyan,
        CopyMagenta, CopyYellow, and CopyBlack.
  <LI> magick/composite.c (CompositeImage): Preserve the canvas image
        colorspace.<BR>
  <LI> doc/options.imdoc: Remove mention of thresholding at the channel
        level since this never worked in a useful fashion and now only
        simple intensity thresholding is available via -threshold.
  <LI> magick/command.c (MogrifyImage): Revert to using ThresholdImage() rather
        than ChannelThresholdImage().<BR>
  <LI> PerlMagick/Magick.xs: Revert to using ThresholdImage() rather
        than ChannelThresholdImage().

</UL>
<p>
2008-05-21  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/effect.c (AddNoiseImage): Implemented using pixel
        iterators.<BR>
  <LI> magick/pixel_row_iterator.c (PixelRowIterateDualNew): New pixel
        iterator.  Similar to existing PixelRowIterateDualModify except
        that this one is for when initializing a new image.

</UL>
<p>
2008-05-20  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/composite.c (CompositeImage): Update image composition to
        use pixel iterator methods.

</UL>
<p>
2008-05-19  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/enhance.c: Re-wrote all enhancement functions in this
        module to be based on the pixel iterator methods.
  <LI> magick/command.c (ConvertImageCommand, MogrifyImageCommand,
        DisplayImageCommand): Gamma multiple channel syntax was broken.
        Now it is fixed.

</UL>
<p>
2008-05-18  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/colorspace.c (RGBTransformImage): Optimized lookup table
        generation performance to the maximum extent possible.
        (TransformRGBImage): Optimized lookup table
        generation performance to the maximum extent possible.
  <LI> magick/image.h (RoundDoubleToQuantum): New macro to explicitly
        safely round a 'double' to a Quantum.
        (RoundFloatToQuantum): New macro to explicitly safely round a
        'float' to a Quantum.<BR>
  <LI> configure.ac: Add OpenMP support library to LIBS so that
        dependent applications will pick up this dependency without
        themselves needing to enable OpenMP.
  <LI> magick/command.c (CompositeImageList): Don't overwrite matte
        flag for CopyOpacity composition.
  <LI> magick/composite.c (CompositeImage): CopyOpacity composition
        needs the opacity channel to be enabled.
  <LI> PerlMagick/Magick.xs: Dissolve composition with Opacity was not
        working right.  Now it does.

</UL>
<p>
2008-05-16  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/gem.c (HWBTransform): Hue value range was scaled wrong,
        leading to clipping.<BR>
        (TransformHWB): Hue value range was scaled wrong, leading to
        clipping.

</UL>
<p>
2008-05-15  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/colorspace.c (RGBTransformImage): Re-implement transform
        loops using PixelRowIterateMonoModify() in order to simplify the
        code.

</UL>
<p>
2008-05-14  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/colorspace.c (TransformRGBImage): Re-implement transform
        loops using PixelRowIterateMonoModify() in order to simplify the
        code.<BR>
  <LI> magick/{pixel_iterator.h, pixel_row_iterator.h}: Pass pixel
        colormap index/indexes to callback functions.  Dependent code is
        adjusted to match.

</UL>
<p>
2008-05-13  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/command.c (ConvertImageCommand, MogrifyImageCommand,
        MogrifyImage): Add command access to the new channel operators.
  <LI> magick/operator.c (QuantumOperatorRegionImage): Support the new
        channel operators.  Update to use PixelRowIterateMonoModify() for
        a bit more performance.<BR>
  <LI> magick/operator.h (enum QuantumOperator): Added new operators
        AssignQuantumOp, ThresholdQuantumOp, ThresholdBlackQuantumOp, and
        ThresholdWhiteQuantumOp.

</UL>
<p>
2008-05-12  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/command.c (VersionCommand): Report if OpenMP is supported
        by the build.<BR>
  <LI> configure.ac, Makefile.am: Install documentation according to
        the conventions established by the configure script.  This
        installs the documentation under
        /usr/local/share/doc/GraphicsMagick by default.

</UL>
<p>
2008-05-11  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> scripts/format_c_api_docs: Add pixel_iterator.c and
        pixel_row_iterator.c to API documentation formatter.
  <LI> magick/api.h: Include pixel_iterator.h and pixel_row_iterator.h.
  <LI> magick/Makefile.am (MAGICK_INCLUDE_HDRS): Formally install
        pixel_iterator.h and pixel_row_iterator.h.
  <LI> magick/image.c (IsImagesEqual): Update to use
        PixelRowIterateDualRead().<BR>
        (GetImageStatistics): Update to use PixelRowIterateMonoRead().
  <LI> magick/pixel_row_iterator.h: New interfaces which are similar to
        the already existing interfaces in pixel_iterator.h except that
        they pass a row to the callback rather than one pixel.
  <LI> magick/operator.c (QuantumOperatorRegionImage): Add progress
        monitor support.<BR>
  <LI> magick/pixel_iterator.c (PixelIterateMonoRead): Add a
        'description' argument and progress monitor support.
        (PixelIterateMonoModify): Add a
        'description' argument and progress monitor support.
        (PixelIterateDualRead): Add a<BR>
        'description' argument and progress monitor support.
        (PixelIterateDualModify): Add a
        'description' argument and progress monitor support.
  <LI> magick/resize.c (HorizontalFilter, VerticalFilter): Switch back
        to RoundSignedToQuantum() since some pixels were experiencing
        underflow.  Localize some variables so that we don't have to
        declare them as private for OpenMP.

</UL>
<p>
2008-05-10  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> configure.ac, magick/resize.c, PerlMagick/Makefile.PL.in: Added
        OpenMP support for parallelizing a task across multiple cores.

</UL>
<p>
2008-05-09  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> configure.ac, magick/nt_base.h: Fix using libbz2 under MinGW.
  <LI> coders/{msl.c, svg.c, url.c}: Fix compilation with modern
        libxml2 under MinGW.

</UL>
<p>
2008-05-08  Josue Andrade Gomes  &lt;josuegomes@gmail.com&gt;

<UL>
  <LI> magick/nt_base.h, libxml/include/win32config.h (vsnprintf):
        Fixed compilation issue noticed with Visual C++ 2008.

</UL>
<p>
2008-05-05  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/magick.c (GetMagickInfo): Simplify implementation.
        (RegisterMagickInfo): Remove any existing entry since module
        loading may result in duplicate entries.

</UL>
<p>
2008-05-04  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> libtool: Update to libtool 1.2.4.
  <LI> magick/magick.h (MagickInfo): Store string attributes as 'const
        char *' to statically allocated data rather than as heap allocated
        strings.  THIS IS AN INTERFACE CHANGE.  Using a coder written to
        the old interface is non-fatal but may resemble a small memory
        leak.  The reason for the change is to avoid at least 880 needless
        malloc()/strlen()/strlcpy() operations at initialization time, and
        at least 880 free() calls at destruction time.  While these
        operations did not take long, they are still an unnecessary
        overhead, which is increased in thread-safe applications.
  <LI> magick/module.c (OpenModule): Ignore requests to open modules
        which have already been opened.
  <LI> GraphicsMagick.spec.in: Add --with-included-ltdl to the default
        options since this seems safest until the libltdl validation logic
        is fully robust.  This should be made user-configurable in the
        future.<BR>
  <LI> magick/Makefile.am (magick_libGraphicsMagick_la_LIBADD): Apply
        libltdl dependency argument as required for building.
  <LI> configure.ac: Intuit if the GraphicsMagick library will depend
        on -lltdl.<BR>
  <LI> Magick++/bin/GraphicsMagick++-config.in: Use substitutions
        rather than invoking GraphicsMagick-config in order to determine
        GraphicsMagick library usage requirements.  This avoids problems
        when GraphicsMagick-config is not in the executable search path.

</UL>
<p>
2008-05-02  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> GraphicsMagick.spec.in: NEWS was renamed to NEWS.txt.  Enable
        libtool verbose output so it is possible to diagnose build
        failures.

</UL>
<p>
2008-05-01  Fojtik Jaroslav  &lt;JaFojtik@seznam.cz&gt;

<UL>
  <LI> mat.c: gm convert -limit Pixels 1 input_gray_lsb_16bit.mat crap.miff
        don't rotate partial image.

</UL>
<p>
2008-04-30  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/magick.c (DestroyMagickInfoList): Use DestroyMagickInfo().
        (UnregisterMagickInfo): Use DestroyMagickInfo().
        (RegisterMagickInfo): Simplify dramatically by adding to the front
        of the list rather than maintaining alpha order.
  <LI> magick/image.c (DestroyImageInfo): Tidy up and simplify code.
  <LI> magick/constitute.c (WriteImage): Comment out the "bi-modal
        delegate" execution code until we determine what value it offers.
        The test suite passes without it.
  <LI> magick/magick.h (struct MagickInfo): There is no need for 'name'
        to be allocated data so make it const.
        (DestroyMagickInfo): Add a static function to destroy a MagickInfo
        structure.  Renamed previous DestroyMagickInfo to
        DestroyMagickInfoList and made it static.

</UL>
<p>
2008-04-29  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> version.sh: GraphicsMagick 1.2 released.
        CVS head is now 1.3 development.
  <LI> png: Updated libpng to 1.2.27.

</UL>
<p>
2008-04-28  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/image.c (SetImageInfo): Ignore file extensions which
        match defined virtual delegate entries (including stealth
        entries).

</UL>
<p>
2008-04-27  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> BENCHMARKS.txt: Added timings for -blur.

</UL>
<p>
2008-04-27  Darko Kojic  &lt;dkc@sf.net&gt;

<UL>
  <LI> magick/effect.c (MedianFilterImage): Fixes to compile on ARM
<STRONG>CPU.</STRONG>

</UL>
<p>
2008-04-26  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/magick.h (MagickInfo): Remove image_info member since I
        can not find any purpose for it.
  <LI> coders/tiff.c (WriteTIFFImage): Remove assertion check on
        scanline size since it has not caught anything.
  <LI> magick/image.c (SetImageInfo): Ensure that the file extension
        does not trigger unwanted activity such as access to an X11
        server, printer, or the launch delegate.
  <LI> config/Makefile.am (configshare_DATA): Install colors.mgk in
        share path.<BR>
  <LI> magick/blob.c (GetConfigureBlob): Search 'share' config path
        prior to 'lib' config path.

</UL>
<p>
2008-04-25  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/png.c (WriteOnePNGImage): TrueColor RGB was usually
        written rather than the desired more compact format.  This is a
        first pass at fixing that.

</UL>
<p>
2008-04-24  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> BENCHMARKS.txt: Added a benchmark summary.

</UL>
<p>
2008-04-23  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> version.sh: Prepare 1.2beta1 release.
  <LI> NEWS.txt: Updated with latest news.

</UL>
<p>
2008-04-22  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> libtool: Update to 1.2965 2008-04-22
  <LI> coders/png.c (ReadOneJNGImage): Deal with ReadImage() returning
        a NULL pointer when reading JPEG sub-image.

</UL>
<p>
2008-04-21  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/channel.c (ExportImageChannel): Added progress monitor
        support.<BR>
        (SetImageChannelDepth): Added progress monitor support.
        (ChannelImage): Don't preserve matte channel when extracting
        channel.<BR>
  <LI> magick/image.c (SetImageOpacity): Avoid integer overflow in Q32
        build.  Added progress monitor support.
        (SyncImage): Added progress monitor support.
        (SetImage): Added progress monitor support.
        (CycleColormapImage): Added progress monitor support.
        (GetImageBoundingBox): Added progress monitor support.
        (SortColormapByIntensity): Added progress monitor support.

</UL>
<p>
2008-04-20  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> configure.ac, magick/Makefile.am: Don't use libtdl unless we are
        supposed to be using it!<BR>
  <LI> libtool: Updated to GNU libtool 1.2960 2008-04-19.
  <LI> configure.ac, magick/delegate.h: It seems that the modern
        convention is to store ghostscript headers in a subdirectory
        called 'ghostscript' rather than 'ps'.
        We don't actually need Ghostscript errors.h and that is a good
        thing since it seems that some newer Ghostscript calls it ierrors.h

</UL>
<p>
2008-04-18  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> VisualMagick/installer/inc/files-dlls.isx: Comment out inclusion
        of X11 support DLLs.<BR>
  <LI> VisualMagick/magick/magick_config.h.in: X11 is no longer in the
        default Windows build.

</UL>
<p>
2008-04-17  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/nt_base.c: Eliminate various annoying warnings noticed
        under MinGW.<BR>
  <LI> magick/spinlock.h (_spinlock_release): Use 'long' rather than
        'int' in order to eliminate warning under MinGW.
  <LI> magick/semaphore.c (spinlock_wait): Use 'long' rather than 'int'
        in order to eliminate warning under MinGW.
  <LI> magick/log.c (LogMagickEventList): Eliminate warning under MinGW.
  <LI> magick/compress.h: Clean up interface definitions to use
        magick_uint8_t for unsigned character data.
  <LI> coders/jpeg.c (ReadJPEGImage): Don't use GetPixelCachePresent()
        since it is not DLL-exported.

</UL>
<p>
2008-04-15  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/yuv.c (ReadYUVImage): Report exception info correctly.
  <LI> coders/xpm.c (ReadXPMImage): Report exception info correctly.
  <LI> coders/xc.c (ReadXCImage): Report exception info correctly.
  <LI> coders/tiff.c (ReadTIFFImage): Report exception info correctly.
  <LI> coders/null.c (ReadNULLImage): Report exception info correctly.
  <LI> coders/jpeg.c (ReadJPEGImage): Report exception info correctly.
        Use of Huffman optimization is now based on available memory
        rather than a hard-coded image size.
  <LI> coders/gif.c (ReadGIFImage): Report exception info correctly.
  <LI> magick/utility.c (MagickSizeStrToInt64): New function to convert
        a size string with optional units suffix to a 64-bit integer.
        (MagickStrToInt64): New function to convert a string to a 64-bit
        integer, with error checking.<BR>
  <LI> magick/image.c (SetImage): SetImage now returns error status.
  <LI> magick/command.c: Eliminated the long-deprecated -cache resource
        limit option.<BR>
  <LI> magick/resource.c: Complete re-write of the resource limit
        system.  Resource specifications are now absolute except that they
        support a binary metric suffix such as 'K' to scale the value.
        Added the 'Pixels' limit type to limit the maximum number of
        pixels allowed for each image.

</UL>
<p>
2008-04-12  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/jpeg.c (WriteJPEGImage): Output grayscale images more
        efficiently.

</UL>
<p>
2008-04-10  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> lcms: Updated lcms to 1.17.
  <LI> png: Updated libpng to 1.2.26.

</UL>
<p>
2008-04-09  Glenn Randers-Pehrson &lt;glennrp@simple....&gt;

<UL>
  <LI> coders/png.c (ReadOnePNGImage) Use the low bits of the PNG
        tRNS values instead of scaling them when reducing from 16-bits.

</UL>
<p>
2008-04-09  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> configure.ac: Updated to Autoconf 2.62.

</UL>
<p>
2008-04-08  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/command.c (MogrifyImageCommand): New -create-directories
        option automatically creates subdirectories as needed when
        -output-directory option is used.  This is useful when one
        directory tree of files is being mogrified to a new tree.

</UL>
<p>
2008-04-07  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/utility.c (MagickCreateDirectoryPath): New function to
        create a directory path.  Will be used later.
  <LI> configure.ac: Tweaks to produce a successful MinGW cross-compile.

</UL>
<p>
2008-04-04  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/tiff.c (WriteTIFFImage): Added a simple sentinel
        assertion to hopefully flush out any remaining cases where
        ExportImagePixelArea() writes past the end of its buffer.
  <LI> magick/constitute.c (ExportImagePixelArea): GrayQuantum case for
        DirectClass pixels was sometimes writing a zero byte one past the
        end of the allocated buffer.  Thanks to Josue Gomes for reporting
        this bug.

</UL>
<p>
2008-04-03  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/{pcd.c,pcx.c,pdb.c,pict.c,stegano.c,wpg.c,xcf.c}:
        Warnings reduction.<BR>
  <LI> magick/{channel.c,image.c,unix_port.c,render.c}: Warnings
        reduction.<BR>
  <LI> coders/mat.c: Convert C99 comments to C89 comments so code can
        compile with a C89 compiler.<BR>
  <LI> coders/tiff.c (WriteTIFFImage): Add an assertion to enforce that
        the bytes output to the scanline is no more than the bytes
        allocated for the scanline.<BR>
  <LI> NEWS.txt: Updated with latest NEWS.

</UL>
<p>
2008-04-02  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/pdf.c (WritePDFImage): Default to ZIP compression if
        available.  Ignore Image compression setting since the useful
        value (set by the user) usually comes from ImageInfo.
  <LI> coders/png.c (WriteOnePNGImage): Fix progress monitor when
        writing PNG.<BR>
  <LI> magick/channel.c (GetImageChannelDepth): Added progress monitor
        support.<BR>
  <LI> magick/signature.c (SignatureImage): Added progress monitor support.
  <LI> magick/image.c (GetImageDepth): Added progress monitor support.

</UL>
<p>
2008-04-01  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> libtool:  Update to libtool 2.2.2.
  <LI> coders/jpeg.c: Convert more code to use size_t for sized values
        rather than long.<BR>
  <LI> coders/wpg.c (InsertRow): Fix log format string specification.
  <LI> coders/dpx.c (WriteDPXImage): Fix typo in casts.
  <LI> coders/fpx.c (ReadFPXImage): Apply FreeBSD patch from Mikhail
        Teterin to allow FlashPIX to work better for 64-bit builds.
        Addresses SourceForge issue 1824658 "FPX should work again now".
  <LI> magick/blob.c (ImageToBlob): Fix typo in cast.

</UL>
<p>
2008-03-29  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> CONTRIBUTE.txt: Convert contribute.html to reStucturedText
        format and generate HTML version from it.
  <LI> PROCESS.txt: Convert description of development process to
        reStucturedText format and generate HTML version from it.
  <LI> INSTALL-windows.txt: Add instructions for how to install from
        setup.exe style installer.  Also add instructions for how the
        distribution package is built.<BR>
  <LI> Copyright.txt: Reformat in reStucturedText format and generate
        HTML version from it.<BR>
  <LI> VisualMagick/installer/inc/body.isx: No longer include
        development headers and libraries in the Windows DLL install
        package since they are large and they may only work with the
        version of Visual C++ used to perform the build.  It is much safer
        for the developer to build the package from source with his own
        compiler.

</UL>
<p>
2008-03-27  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> Fix compilation issues with Microsoft Visual Studio.

</UL>
<p>
2008-03-26  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/dpx.c (ReadDPXImage, WriteDPXImage): Use lookup tables to
        speed up value conversion.<BR>
  <LI> magick/memory.h (MagickAllocateArray): Renamed from
        MagickAllocateMemoryElements.

</UL>
<p>
2008-03-25  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> PerlMagick/Magick.xs: Use memory allocation macros like the rest
        of the code.<BR>
  <LI> magick/memory.c (MagickMalloc): New function which behaves
        similar to malloc().<BR>
        (MagickMallocArray): New function for allocating an array.
        (MagickRealloc): New function which behaves similar to realloc().
        (MagickFree): New function which behaves similar to free().
        (MagickAllocFunctions): New function to allow the user to specify
        the memory allocation functions.
  <LI> magick/memory.h: New header file to define memory allocation
        functions.<BR>
  <LI> magick/deprecate.c (DeleteImageList, DestroyImages,
        GetImageList, GetImageListIndex, GetImageListSize, GetNextImage,
        GetNumberScenes, GetPreviousImage, ParseImageGeometry,
        PopImageList, PostscriptGeometry, PushImageList,
        SetCacheThreshold, SetImageList, ShiftImageList, SizeBlob,
        SpliceImageList, UnshiftImageList): Remove functions which were
        already deprecated in ImageMagick 5.5.2 or earlier.

</UL>
<p>
2008-03-24  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/dpx.c (WriteDPXImage): Support writing image which is
        already in a YCbCr colorspace.<BR>
        (ReadDPXImage): Return YCbCr images in YCbCr colorspace unless
        they are also Cineon log encoded.
  <LI> magick/image.c (CloneImage): Use CloneImageAttributes().
  <LI> magick/attribute.c (CloneImageAttributes): New function for
        copying image attributes from one image to another.
  <LI> magick/utility.c (TranslateTextEx): Check if the pixel cache is
        initialized before using a function which requires using it.
        Thanks to Micha³ Kowalczuk for bringing this issue to my
        attention.<BR>
  <LI> magick/attribute.c (SetImageAttribute): Only apply
        transformations to "comment" and "label" attributes.
  <LI> magick/pixel_cache.c (GetPixelCachePresent): New function to
        test if the image pixel cache is present and initialized.

</UL>
<p>
2008-03-17  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/colorspace.c (RGBTransformPacket): Rationalize casts for
        improved performance.<BR>
  <LI> magick/image.c (GetImageDepth): Use table lookups to improve
        performance.

</UL>
<p>
2008-03-16  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/image.c (AllocateImage): Transfer any attributes from
        ImageInfo to allocated image.<BR>
        (SetImageDepth): Use table lookups to improve performance.

</UL>
<p>
2008-03-14  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/command.c (MogrifyImageCommand): Added an
        -output-directory option to 'mogrify' to send output files to the
        specified directory.

</UL>
<p>
2008-03-11  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> PerlMagick/t/read.t: Add input_logical_lsb_08bit.mat to
        PerlMagick tests.<BR>
  <LI> magick/nt_feature.c (CropImageToHBITMAP, ImageToHBITMAP): Use
        GlobalFree() to free bitmap handle.

</UL>
<p>
2008-03-10  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> PerlMagick/t/read.t: Added/adjusted WPG test files from Jaroslav
        Fojtik.

</UL>
<p>
2008-03-09  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> AUTHORS.txt, BUGS.txt, FAQ.txt, NEWS.txt, PLATFORMS.txt,
        TODO.txt, INSTALL-unix.txt, INSTALL-windows.txt: Use
        reStructuredText format.<BR>
  <LI> Makefile.am: Use reStructuredText for more files.

</UL>
<p>
2008-02-29  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/constitute.c (ReadImage): Disable colorspace override
        code since it was being wrongly-triggered in X11 display commands.

</UL>
<p>
2008-02-23  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> www/body.html: Update to mention 1.1.11 release.

</UL>
<p>
2008-02-20  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/colorspace.c (RndToInt): Cast result to 'unsigned int'
        rather than 'int' in order to avoid possible value truncation with
        Q32 build.  Problem was reported by Kai-Uwe Behrmann.
        (TransformRGBImage): Fix loop iterator which was looping one past
        the end of the array.  Reported by Kai-Uwe Behrmann.
  <LI> magick/command.c: Added a -set option to the composite, convert,
        display, mogrify, import commands in order to allow setting an
        image attribute.

</UL>
<p>
2008-02-19  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> PerlMagick/Magick.xs: Use MagickAcquireMemory() rather than
        AquireMemory().<BR>
  <LI> coders/xwd.c (ReadXWDImage): Eliminate integer overflow
        vulnerability (IDefense 09.19.07).
  <LI> coders/xbm.c (ReadXBMImage): ditto
  <LI> coders/xcf.c (ReadXCFImage): ditto
  <LI> coders/dib.c (ReadDIBImage): ditto
  <LI> coders/dcm.c (ReadDCMImage): ditto

</UL>
<p>
2008-02-09  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/tiff.c (WriteTIFFImage): The RFC 2301 specification for
        Internet FAX recommends LSB2MSB fill order so document that.

</UL>
<p>
2008-02-08  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/tiff.c (WriteTIFFImage): Use '-define
        tiff:fill-order={msb2lsb|lsb2msb}' to control TIFF bit fill order.

</UL>
<p>
2008-02-06  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> configure.ac: Updated to latest CVS libtool.
  <LI> coders/tiff.c (CompressionSupported): Use
        TIFFGetConfiguredCODECs() to test if a requested compression type
        is supported by libtiff.  Based on advice from Frank Warmerdam.
  <LI> configure.ac: Add test for TIFFGetConfiguredCODECs() in libtiff.

</UL>
<p>
2008-02-05  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/tiff.c: With libtiff 3.6.1, including tiff.h and tiffio.h
        is not sufficient to obtain the definitions from tiffconf.h so
        libtiff is assumed to not support any features, such as
        compression.  Avoid this problem by explicitly including
        tiffconf.h if it is found.  This resolves SourceForge issue
        [1883527] compression of tiff-file has no effect.

</UL>
<p>
2008-02-03  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> VisualMagick/installer/inc/setup.isx: Set Inno Setup installer
        compression to "lzma/max".<BR>
  <LI> PerlMagick/Magick.xs: Eliminate use of memory allocation macros
        since these failed miserably under Windows where it seems that
        malloc, free, and realloc are redefined via macros by the Perl
        build environment.  This reverts changes made on 2007-12-01.
  <LI> magick/memory.c (MagickAcquireMemoryArray): Use implementation
        from the 1.1 branch.<BR>
  <LI> magick/utility.h: Remove MagickSafeMultiplySize_t since it seems
        that use of inline functions in Windows is a disaster area.

</UL>
<p>
2008-02-02  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> Makefile.am (windows-dist): Create a 7z compressed Windows
        comprehensive source package.  See http://www.7-zip.org/ for
        information on Windows 7-Zip and http://p7zip.sourceforge.net/ for
        information on portable 7-Zip (P7ZIP).

</UL>
<p>
2008-02-01  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/tiff.c (WriteTIFFImage): Add logging for image resolution
        and resolution units.<BR>
  <LI> magick/version.h.in: Update copyright year to 2008.

</UL>
<p>
2008-02-01  Gary V. Vaughan  &lt;gary@gnu.org&gt;

<UL>
  <LI> configure.ac: Updated for libtool-2.1b.
  <LI> bootstrap (libtoolize): Libtoolize can figure out the mode and
        directory for libltdl from configure.ac.

</UL>
<p>
2008-01-28  Ralf Wildenhues  &lt;Ralf.Wildenhues@gmx.de&gt;

<UL>
  <LI> magick/Makefile.am: Update
        magick_libGraphicsMagick_la_DEPENDENCIES to use LTDLDEPS.

</UL>
<p>
2008-01-26  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/image.c (SetImageInfo): Successfully read existing file
        names in the form file[123] which were failing to read since they
        appear to be a valid sub-image specification.

</UL>
<p>
2008-01-24  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/utility.c (ExpandFilenames): If a filename appears to
        contain a wildcard specification, first check to see if there is
        file matching the unexpanded wildcard prior to engaging in the
        slow task of wildcard expansion.  Without this fix, expanding the
        command line takes a very long time if there are a huge number of
        files in the directory, and some file names appear to contain
        wildcard specifications.  Inspired by SourceForge bug reports [
        1878992 ] "literal square brackets in file name cause large delay"
        and [ 1783209 ] "converting runs slowly when subimage is
        specified", but this might not be the complete fix for the
        problem.

</UL>
<p>
2008-01-22  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> Makefile.am: Update to Automake 1.10.1 and enable generation of
        an lzma compressed source package.

</UL>
<p>
2008-01-19  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> configure.ac: Added configure option --with-umem to enable use
        of the umem memory allocation library available in Solaris 9,
        Update 3 and later, or from<BR>
        https://labs.omniti.com/trac/portableumem/.  This library supports
        concurrency in multi-threaded programs and supports debugging
        memory issues.  See<BR>
        http://developers.sun.com/solaris/articles/libumem_library.html
        for a description of how to use the library for debugging memory
        issues.

</UL>
<p>
2008-01-17  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/command.c (VersionCommand): Include a "Large Memory" item
        in the Feature Support list.<BR>
  <LI> coders/png.c (RegisterPNGImage): Remove reference to dead PNG
        ftp site.<BR>
  <LI> VisualMagick/configure/configure.cpp (InitInstance): Remove
        project dependency on dxguid.lib (Direct-X).

</UL>
<p>
2008-01-13  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> configure.ac: Update libtool to latest CVS version.

</UL>
<p>
2008-01-02  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/command.c (DisplayImageCommand): No longer default to
        reading standard input if stdin fails isatty() test.  This
        behavior was causing failure to launch from Gnome and it is
        difficult to work around the issue from within a .desktop file.
        (AnimateImageCommand): No longer default to
        reading standard input if stdin fails isatty() test.

</UL>
<p>
<HR>
Copyright (C) 2008 GraphicsMagick Group

<p>
This program is covered by multiple licenses, which are described in
Copyright.txt. You should have received a copy of Copyright.txt with this
package; otherwise see http://www.graphicsmagick.org/www/Copyright.html.


<hr>
<P ALIGN=CENTER><FONT FACE="Verdana, Arial, Helvetica, sans-seri"><A HREF="Copyright.html">Copyright</A>
<FONT FACE="Abadi Mt Condensed Extra Bold">&copy;</FONT>
GraphicsMagick Group 2002, 2003, 2004</FONT></P></BODY>
</HTML>

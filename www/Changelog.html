<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
<TITLE>GraphicsMagick 1.2 ChangeLog</TITLE>
	<STYLE>
	<!--
		@page { size: 8.5in 11in }
		TD P { color: #000000; font-family: "Verdana", "Arial", "Helvetica", sans-serif; font-size: 12pt }
		P { color: #000000; font-family: "Verdana", "Arial", "Helvetica", sans-serif; font-size: 12pt }
		A:link { color: #0085c0 }
		A:visited { color: #800080 }
	-->
	</STYLE>
</HEAD>
<body LANG="en-US" TEXT="#000000" LINK="#0085c0" VLINK="#800080" BGCOLOR="#ffffff">
<table BORDER=0 WIDTH="100%" >
<tr>
<td BGCOLOR="#52799E"><img SRC="../images/right_triangle.png" ALT=">" height=14 width=15>
<b><font face="Helvetica, Arial"><font color="#FFFFFF"><font size="+1">GraphicsMagick 1.2 ChangeLog</font></font></font></b></td>
</tr>
</table>
<p>
2007-07-19  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/utility.h (MagickReallocMemory): It seems that realloc()
        frees the provided memory pointer if the requested size is zero.
        This was causing MagickReallocMemory() to perform a double-free
        under error conditions.  Inspired by Debian
        realloc_double_free_fix patch by Daniel Kobras.

</UL>
<p>
2007-07-18  Daniel Kobras  &lt;kobras@debian.org&gt;

<UL>
  <LI> magick/quantize.c (GrayscalePseudoClassImage): Fix computation
        of memory required for colormap index
        (colormap_heap_overflow_fix).

</UL>
<p>
2007-07-18  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/miff.c (WriteRunlengthPacket): Converted excessively long
        macro to a function and hopefully eliminate warnings when using
        Visual Studio 2005.<BR>
  <LI> magick/pixel_cache.c (ClonePixelCache): Eliminate bug when
        size_t is an unsigned type.

</UL>
<p>
2007-07-15  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/image.c (SetImageInfo): Address security issue noted by
<STRONG>CVE-2006-0082</STRONG><BR>
        http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-0082 in
        which output filenames matching arbitrary printf specifications
        may cause GraphicsMagick to crash.
  <LI> magick/utility.c (TranslateTextEx): New version of TranslateText
        which allows copying each attribute via a user-provided callback
        function.<BR>
  <LI> magick/delegate.c (InvokeDelegate): Implement secure delegate
        execution in POSIX environments in order to avoid injection of
        arbitrary shell commands via carefully crafted filenames.  Fixes
        Debian Bug 345238 "[CVE-2005-4601] Shell command injection in
        delegate code (via file names)"
        http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=345238

</UL>
<p>
2007-07-08  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/forward.h: New header file to support forward type
        declarations.<BR>
  <LI> coders/pnm.c (ReadPNMImage):  Fix pixel scaling problem caused by
        floating point rounding error.

</UL>
<p>
2007-07-07  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/studio.h: Provide pread() and pwrite() prototypes if they
        are missing.<BR>
  <LI> configure.ac: Check for missing pread() and pwrite() prototypes.
  <LI> m4/ac_func_fseeko.m4: Use fixed version of AC_FUNC_FSEEKO.
  <LI> magick/utility.c (SystemCommand): Avoid use of snprintf.

</UL>
<p>
2007-07-06  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/blob.c: Only replace getc_unlocked() and putc__unlocked()
        for a thread-safe build.<BR>
  <LI> magick/studio.h: Always use fseeko() and ftello() if they are
        available.

</UL>
<p>
2007-07-02  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/dpx.c (ReadDPXImage): Avoid using seek() if possible, and
        don't use at all if the input is not seekable.
  <LI> coders/psd.c (ReadPSDImage): Eliminate memory leak when reading
        PSD files.  Fixes Sourceforge issue 1625477 "Memory leak reading
        layered PSD Image".

</UL>
<p>
2007-06-29  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/command.c: Fixed -affine command argument
        validation. Fixes SourceForge issue 1743141 "Affine matrix option
        parsing".<BR>
  <LI> config/magic.mgk: Added detection for BigTIFF.
  <LI> coders/tiff.c: Preliminary work to support BigTIFF.

</UL>
<p>
2007-06-18  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/dpx.c: Fix problems encountered when reading and writing
        from/to pipes or compressed files.

</UL>
<p>
2007-06-17  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/dpx.c (ReadDPXImage): Improved the pixel data marshalling
        in order to obtain better read performance for 10-bit DPX.
  <LI> magick/blob.c (OpenBlob): Added support for MAGICK_MMAP_READ and
        MAGICK_MMAP_WRITE environment variable options to enable input and
        output file access using mmap().

</UL>
<p>
2007-06-10  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/blob.c (OpenBlob): Use MAGICK_IOBUF_SIZE to tune the size
        of the I/O buffer.  Sometimes performance is improved by using
        something other than the current default of 16KB.

</UL>
<p>
2007-06-05  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/miff.c (ReadMIFFImage): Handle case where compression
        keyword is present but has value of 'None'.

</UL>
<p>
2007-06-03  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/blob.c (OpenBlob): Disable reading input files using
        memory mapping since it has been learned that some operating
        systems fail to do read-ahead on network files.  Without
        read-ahead, performance is poor.
  <LI> magick/resource.c (AcquireMagickResource): Map resource limit
        was not being properly checked due to a typo.  The memory limit
        was being tested instead.<BR>
  <LI> coders/tiff.c (ReadTIFFImage): Use libtiff to decode OJPEG
        compressed files into RGB.  Probably requires new OJPEG
        implementation from Joris Van Damme which is new in libtiff and
        not yet released. I am not completely sure that this approach is
        correct yet.

</UL>
<p>
2007-05-23  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/xwindow.c (MagickXGetWindowImage): Set image-&gt;depth
        appropriately.<BR>
  <LI> many files: Compiler warnings reduction.

</UL>
<p>
2007-05-13  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/cineon.c (ReadCINEONImage): Alter sample scaling
        algorithm a bit.<BR>
  <LI> tests/rwblob.c, tests/rwfile.c: Allow some slop when testing
        Cineon format with QuantumDepth=8 since we are currently only
        supporting 10 bit samples.

</UL>
<p>
2007-05-09  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/jpeg.c (ReadJPEGImage): Fix reading 12-bit grayscale
<STRONG>JPEG.</STRONG>

</UL>
<p>
2007-05-06  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/cineon.c (WriteCINEONImage): Re-wrote Cineon writer from
        scratch.  There is no code originating from ImageMagick in this
        source module any more.

</UL>
<p>
2007-04-30  Fojtik Jaroslav  &lt;JaFojtik@seznam.cz&gt;

<UL>
  <LI> coders/art.c, coders.cut.c, coders/mat.c, coders/wpg.c: Add
        support for PingImage() so that image identification is fast by
        default.  Also eliminates error message produced by mat.c due to
        rotating an image which has no pixel cache.

</UL>
<p>
2007-04-09  Fojtik Jaroslav  &lt;JaFojtik@seznam.cz&gt;

<UL>
  <LI> coders/wpg.c (ReadWPGImage): Fix for SourceForge bug id 1431805
        "clip art wpg files cause access violation in graphics magick".

</UL>
<p>
2007-04-09  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/pixel_cache.c (ModifyCache): Ensure that the cache nexus
        is open.  Fix for SourceForge bug id 1173713 "segfault in
        ModifyCache"<BR>
  <LI> m4/acx_pthread.m4 (ACX_PTHREAD): Apply fixes necessary to
        support C++ compiler properly.

</UL>
<p>
2007-04-08  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/GraphicsMagick.pc.in: Fix for SourceForge bug id 1576616
        "Fix includedir variable in pkg-config files".
  <LI> magick/pixel_cache.c (GetOnePixel): Fix for SourceForge bug id
        1572357 "GetOnePixel definition appears incorrect".  It is true
        that this function is intended for read-only purposes and that the
        PixelPacket value is returned directly.
  <LI> coders/pdf.c (WritePDFImage): Fix for SourceForge bug id 1510075
        "Failed to write PDF with JPEG compression".
  <LI> magick/command.c (MogrifyImageCommand): Properly bubble up
        errors and terminate further mogrify processing immediately. This
        in response to SourceForge bug id 1391421 "problem doing resize on
        273x1 JPEG".<BR>
  <LI> magick/magick.c (InitializeMagickClientPathAndName): Fix for
        SourceForge bug id 1315109 "segfault in InitializeMagick(NULL)".
  <LI> wand/magick_wand.c (MagickGetQuantumDepth): Fix for SourceForge
        bug id 1353744 "MagickGetQuantumDepth doesn't work".
  <LI> PerlMagick/t/read.t: Added a test for WPG v1.

</UL>
<p>
2007-04-07  Fojtik Jaroslav  &lt;JaFojtik@seznam.cz&gt;

<UL>
  <LI> coders/mat.c: Read Matlab files in both big and little endian
        format.

</UL>
<p>
2007-03-28  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/dpx.c (WriteDPXImage): Set DPX reference high quantity to
        2.047 rather than 2.048 since zero is assumed to occupy one count
        and 2.047 seems to be the convention even though the DPX
        specification says the default is 2.048.  Technicolor uses 2.047.
  <LI> m4/acx_pthread.m4: Update version of ACX_PTHREAD macro used.

</UL>
<p>
2007-03-28  Fojtik Jaroslav  &lt;fojtik@humusoft.cz&gt;

<UL>
  <LI> coders/wpg.c: Support CTM translation in WPG reader.

</UL>
<p>
2007-03-08  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/dpx.c: Store 10-bit Luma samples in the filled 32-bit
        storage word starting with the datum in the least significant
        position.

</UL>
<p>
2007-02-10  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> Updated autoconf to version 2.61.

</UL>
<p>
2007-02-10  Daniel Kobras  &lt;kobras@debian.org&gt;

<UL>
  <LI> coders/palm.c: (ReadPALMImage) Do not implicitly call
          ReadBlobByte() twice in Min() macro. Patch thanks to
          Vladimir Nadvornik. This was a regression introduced in
          patch for CVE-2006-5456. (CVE-2007-0770)

</UL>
<p>
2006-11-02  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> www/Magick++/Image.html: Fix documentation regarding retrieving
        EXIF attribute.<BR>
  <LI> magick/command.c: Fix typo in usage messages.

</UL>
<p>
2006-11-02  Daniel Kobras  &lt;kobras@debian.org&gt;

<UL>
  <LI> coders/dcm.c: (ReadDCMImage) Prevent buffer overflow of
        'photometric' array in DCM coder. Original patch thanks to
        M Joonas Pihlaja. (CVE-2006-5456)
  <LI> coders/palm.c: (ReadPALMImage) Fix heap overflows of 'one_row'
        array in PALM coder. Original patch thanks to M Joonas Pihlaja.
<STRONG>(CVE-2006-5456)</STRONG>

</UL>
<p>
2006-10-24  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> Updated libtool to latest CVS head version (1.2352 2006/10/24)
        in order to fix a bootstrap nit.

</UL>
<p>
2006-10-22  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> Updated autoconf to version 2.60, automake to version 1.10, and
        libtool to latest CVS head version (1.2348 2006/10/22).

</UL>
<p>
2006-09-11  Daniel Kobras  &lt;kobras@debian.org&gt;

<UL>
  <LI> coders/xcf.c (ReadBlobStringWithLongSize): Add new parameter 'max'
        to prevent overflowing the 'string' array. (CVE-2006-3743)
        (ReadOneLayer): Adjust callers of ReadBlobStringWithLongSize(), and
        guard against infinite loops on premature end-of-file.
        (ReadXCFImage): Adjust callers of ReadBlobStringWithLongSize(), and
        guard against infinite loops on premature end-of-file.

</UL>
<p>
2006-09-09  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/sgi.c (ReadSGIImage): Mostly applied Debian patch for
        CVE-2006-4144 security issue related to RLE decoding.  Also added
        complete verification of file header.
  <LI> magick/image.c (ComputePixelError): Add progress monitor.
        (GetImageStatisticsMean): Call progress monitor less often.
        (GetImageStatisticsVariance): Call progress monitor less often.

</UL>
<p>
2006-08-17  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/tiff.c (WriteTIFFImage): ImageInfo 'endian' option now
        controls TIFF byte-order rather than bit-order when writing.
  <LI> coders/png.c (ReadOnePNGImage): Fix compilation problem.  Patch
        submitted by Aron Stansvik.

</UL>
<p>
2006-07-11  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/jpeg.c (WriteJPEGImage): Clear the JPEG library
        structures in order to ensure a completely clean slate.

</UL>
<p>
2006-06-04  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/command.c (ConvertImageCommand): Fix memory leaks which
        occured when an image was not returned.
  <LI> magick/command.c (IdentifyImageCommand): Ditto.
  <LI> magick/command.c (MogrifyImageCommand): Ditto.

</UL>
<p>
2006-06-01  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/command.c: Add mention of -resample to convert and
        mogrify usage messages.

</UL>
<p>
2006-05-31  Ralf Wildenhues  &lt;Ralf.Wildenhues@gmx.de&gt;

<UL>
  <LI> configure.ac: Fix arguments to AC_CHECK_HEADER.

</UL>
<p>
2006-05-19  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/tiff.c (ReadTIFFImage): -define tiff:alpha= override was
        only working if the TIFFTAG_EXTRASAMPLES tag was present.  Now it
        is always available when an alpha channel is present.

</UL>
<p>
2006-05-11  JH  &lt;jh@ops.everybox.com&gt;

<UL>
  <LI> GraphicsMagick.spec.in (files devel): Include
        %{_libdir}/lib%{name}Wand.so.

</UL>
<p>
2006-05-04  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/nt_base.c (NTGhostscriptEnumerateVersions): Recent GNU
        Ghostscript identifies itself as "GPL Ghostscript".

</UL>
<p>
2006-04-10  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> tiff: Updated bundled libtiff to version 3.8.2.

</UL>
<p>
2006-04-05  Fojtik Jaroslav  &lt;JaFojtik@seznam.cz&gt;

<UL>
  <LI> coders/mat.c: Sets image is_grayscale flag as well as added more
        symbolic constants.

</UL>
<p>
2006-04-04  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/dpx.c (IMAGE_DATA_ROUNDING): Thanks to Steve Sloan for
        noticing that 8K is 8192 rather than 8092.  Added a define to
        allow tailoring the pixel data alignment boundary in case 8K is
        not the right answer for some reason.

</UL>
<p>
2006-03-20  Fojtik Jaroslav  &lt;JaFojtik@seznam.cz&gt;

<UL>
  <LI> coders/mat.c: Ensure that unusued opacity channel is set to opaque.
  <LI> PerlMagick/t/input.art: New ART test image.
  <LI> PerlMagick/t/input8.mat: New MATLAB test image (8-bit indexed).
  <LI> PerlMagick/t/input_dbl.mat: New MATLAB test image (double grey)
  <LI> PerlMagick/t/input_rgb.mat: New MATLAB test image (8-bit RGB)

</UL>
<p>
2006-03-19  Fojtik Jaroslav  &lt;JaFojtik@seznam.cz&gt;

<UL>
  <LI> coders/mat.c: Use symbolic constants rather than plain numbers
        so the module is more maintainable.  Correct the format for the
        day of the week.

</UL>
<p>
2006-03-13  Fojtik Jaroslav  &lt;JaFojtik@seznam.cz&gt;

<UL>
  <LI> coders/mat.c (WriteMATLABImage): Add RGB writer support for
        MATLAB format.

</UL>
<p>
2006-03-11  Fojtik Jaroslav  &lt;JaFojtik@seznam.cz&gt;

<UL>
  <LI> coders/mat.c (ReadMATImage): RGB support for MAT reader.

</UL>
<p>
2006-03-02  Fojtik Jaroslav  &lt;JaFojtik@seznam.cz&gt;

<UL>
  <LI> coders/mat.c: Fixes for observed crash.  Byte and word formats
        are working.

</UL>
<p>
2006-02-27  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> doc/environment.imdoc: MAGICK_FONT_PATH has not been supported
        since 1.1.  Remove mention of it!

</UL>
<p>
2006-02-23  Mike Chiarappa  &lt;mikechiarappa@libero.it&gt;

<UL>
  <LI> BCBMagick: Updated to latest changes

</UL>
<p>
2006-02-06  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/sgi.c (ReadSGIImage): Properly compute image depth for
        16-bit SGI image files.

</UL>
<p>
2006-01-22  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/utility.c (GetExecutionPathUsingName): Search executable
        search path for binary.

</UL>
<p>
2006-01-17  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> coders/dpx.c (ReadDPXImage, WriteDPXImage): Alpha channel in DPX
        uses zero, or reference black, to represent an opaque pixel.

</UL>
<p>
2006-01-04  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/semaphore.c (AllocateSemaphoreInfo): Allow semaphores to
        recurse on POSIX systems which support recursive semaphores but
        also warn if the semaphore recurses.
  <LI> magick/log.c (SetLogEventMask): Avoid deadlock if invoked before
        log.mgk has been loaded.<BR>
  <LI> magick/attribute.c (GenerateEXIFAttribute): Fix memory leak on
        error which was reported by Micha³ Kowalczuk.

</UL>
<p>
2006-01-03  Bob Friesenhahn  &lt;bfriesen@simple.dallas.tx.us&gt;

<UL>
  <LI> magick/constitute.c (ReadImage): Avoid crash if delegate fails
        to return image.

</UL>
<p>
2006-01-03  Daniel Kobras  &lt;kobras@debian.org&gt;

<UL>
  <LI> magick/attribute.c (GenerateEXIFAttribute): Fix EXIF IFD stack
        overflow vulnerability.<BR>
  <LI> configure.ac: Fix typo in HTMLDecodeDelegate.

</UL>
<p>
<HR>
Copyright (C) 2006 GraphicsMagick Group

<p>
This program is covered by multiple licenses, which are described in
Copyright.txt. You should have received a copy of Copyright.txt with this
package; otherwise see http://www.graphicsmagick.org/www/Copyright.html.


<hr>
<P ALIGN=CENTER><FONT FACE="Verdana, Arial, Helvetica, sans-seri"><A HREF="Copyright.html">Copyright</A>
<FONT FACE="Abadi Mt Condensed Extra Bold">&copy;</FONT>
GraphicsMagick Group 2002, 2003, 2004</FONT></P></BODY>
</HTML>
